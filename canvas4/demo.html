<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>速度和加速度1</title>
</head>
<body>
<canvas id="canvas" style="border: 1px solid blue;"></canvas>
</body>
<script type="text/javascript" src="js/place.js"></script>
<script type="text/javascript" src="js/ball.js"></script>
<script type="text/javascript" src="js/arrow.js"></script>
<script type="text/javascript">
    /*匀速运动*/
    /*window.onload=function(){
        var canvas=document.getElementById('canvas'),
            context=canvas.getContext('2d');
        canvas.width=400;
        canvas.height=400;

        var ball=new Ball();
        ball.x=canvas.width/2;
        ball.y=canvas.height/2;
        var  vx=5;//定义速度
        var  vy=5;

        (function drawFrame(){
            window.requestAnimationFrame(drawFrame);
            context.clearRect(0,0,canvas.width,canvas.height);
            if(ball.x>canvas.width+ball.radius){
                ball.x=-ball.radius;
            }
            if(ball.y>canvas.height+ball.radius){
                ball.y=-ball.radius;
            }
            ball.x+=vx;
            ball.y+=vy;
            ball.draw(context);
        }())
    }*/
    /*力的分解*/
    window.onload=function(){
        var canvas=document.getElementById('canvas'),
                context=canvas.getContext('2d');
        canvas.width=400;
        canvas.height=400;

        var mouse=place.captureMouse(canvas);
        var arrow=new Arrow();
        arrow.x=canvas.width/2;
        arrow.y=canvas.height/2;
        var dx= 0,
            dy=0;
        var angle= 0,speed=5;//定义速度和方面
        (function drawFrame(){
            window.requestAnimationFrame(drawFrame);
            context.clearRect(0,0,canvas.width,canvas.height);
            dx=mouse.x-arrow.x;
            dy=mouse.y-arrow.y;
            angle=Math.atan2(dy,dx);
            arrow.rotation=angle;//箭头旋转角度
            var vx=speed*Math.cos(angle);
            var vy=speed*Math.sin(angle);
            arrow.x+=vx;
            arrow.y+=vy;
            arrow.draw(context);
        }())
    }
</script>
</html>