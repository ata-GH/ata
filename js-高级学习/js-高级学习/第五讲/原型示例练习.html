<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script type="text/javascript" charset="UTF-8">

    // 原型的示例练习
    /*原型的另外一个作用就是扩展对象中的属性和方法的
     * 模拟Array中的each循环方法
     * forEach*/

    //Array 实现each方法
    var arr=[1,2,3,[1,2],[3,4],5];
    arr.forEach(function(item,index){
//        console.log(item);
    });

  /*  var arr1=[1,2,[3,[4,5,[6,7],8],9],10];
    Array.prototype.each=function(fun){
        try{
            //1 目的：遍历数组的每一项 //计数器 记录当前遍历的检索的位置
            this.count ||(this.count = 0);
            // 判断什么情况下 进行遍历
            if(this.length>0 && fun.constructor==Function){
                while(this.count<this.length){
                    var e=this[this.count];
                    if(e && e.constructor===Array){
                        //递归操作
                        e.each(fun);
                    }else{
                        //如果不是数组 回调操作
                        fun.apply(e,[e]);
                    }
                    this.count++;
                }
                this.i=null; //释放内存 垃圾回收机制
            }
        }catch(ex){

        }
        return this
    };
    arr1.each(function(item){
        console.log(item);
    });*/

    var arr1=[1,2,[3,[4,5,[6,7],8],9],10];
    Array.prototype.each=function(fun){
        try{
            //开始判断 是否进行循环 并计数循环当前的逻辑
            this.i||(this.i=0);
            if(this.length>0 && fun.constructor ===Function){
                while(this.i<this.length){
                    var item=this[this.i];
                    if(item && item.constructor===Array){
                        //如果存在多维数组 进行递归操作
                        item.each(fun);
                    }else{
                        fun.apply(item,[item]);
                    }
                    this.i++;
                }
            }
            this.i =null;

        }
        catch(ex){}
    };
    arr1.each(function(item){
        console.log(item);
    })


</script>
</body>
</html>