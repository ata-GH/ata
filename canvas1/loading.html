<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>百分比加载</title>
</head>
<body>
<canvas id="loading" style="background-color: #fff"></canvas>
</body>
<script>
    var canvas=document.getElementById('loading'),
        context=canvas.getContext('2d');
    /*设置canvas的宽高*/
    canvas.width=400;
    canvas.height=400;
    /*设置圆的中心点*/
    var canvasX=canvas.width/ 2,
        canvasY=canvas.height/ 2,
        r=100,
        rad=2*Math.PI/6,
        speed= 0,
        speedText=0;
    /*绘制蓝色外圆*/
    function blueCircle(context,n){
        context.save();
        context.strokeStyle='#49f';
        context.lineWidth=4;
        context.beginPath();
        context.arc(canvasX,canvasY,r-2,n*Math.PI,n*Math.PI+Math.PI/3,false);
        context.stroke();
        context.closePath();
        context.restore();
    }
    /*百分比文字*/
    function DrawText(n){
        context.save();
        context.beginPath();
        context.font='40px Arial';
        context.fillText((50*n).toFixed(0)+'%',canvasX-25,canvasY+10);
        context.stroke();
        context.restore();
    }
    /*循环动画*/
    (function DraFrame(){
        window.requestAnimationFrame(DraFrame);
        context.clearRect(0,0,canvas.width,canvas.height);
        DrawText(speed);
        blueCircle(context,speed);
        if(speed>=2){speed=0}
        speed +=0.01;
        if(speedText>=2){speedText=0}
        speedText+=0.001;
    }())


</script>
</html>